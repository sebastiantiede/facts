var transitionEndTrigger="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";$(window).ready(function(){F_Global.init(),F_UI.init(),F_Git.init(),F_Facts.init()}).scroll(function(){}).resize(function(){$(this).trigger("resize__tooltip")});
var F_Global={vars:{},init:function(){},is_mobile:function(){if(null!=NSINKA_Global.vars.is_mobile)return NSINKA_Global.vars.is_mobile;var i=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||window.opera),NSINKA_Global.vars.is_mobile=i,i},is_tablet:function(){var i=$(window).width(),a=$(window).height(),t=i>a?i/a:a/i;return this.is_mobile()&&t<1.6},is_smartphone:function(){var i=$(window).width(),a=$(window).height(),t=i>a?i/a:a/i;return this.is_mobile()&&t>1.6},ajaxPage:function(i,a){NSINKA_Global.vars.xhr&&NSINKA_Global.vars.xhr.abort(),NSINKA_Global.vars.xhr=$.ajax({url:i,success:function(i){$data=$.parseHTML(i).filter(function(i){return"TITLE"==i.nodeName||"MAIN"==i.nodeName?i:void 0}),title=$data.filter(function(i){return"TITLE"==i.nodeName?i:void 0}),$("title").text($(title[0]).text()),a($data)},dataType:"html"})},randomColor:function(){for(var i="#",a=0;a<6;a++)i+="0123456789ABCDEF"[Math.floor(16*Math.random())];return i},tmpl:function(i,a){return a={data:a}||{data:{}},_.template($("#tmpl_"+i).clone().text())(a)},history:{set:function(i,a){history.pushState({},i,a)}}};
function getRandItemsOfArray(e,t){var s=e.length;return e=e[Math.floor(Math.random()*e.length)],console.log(t,s),t<s&&(e=e.splice(0,t)),e}var F_Facts={vars:{},init:function(){this.slideshow()},slideshow:function(){F_Facts.vars.$slideshow=$("#facts_slideshow"),F_Git.searchFile("facts/de_DE",function(e){F_Facts.vars.$slideshow.slick({prevArrow:'<button type="button" class="slick-prev material-icons">&#xE314;</button>',nextArrow:'<button type="button" class="slick-next material-icons">&#xE315;</button>'}),$.each(e._data,function(e,t){F_Git.file(t.html_url,function(e){$slide=$(F_Global.tmpl("factArticle",e)),$slide[0].factFile=t.html_url,$slide[0].factData=e,F_Facts.vars.$slideshow.slick("slickAdd",F_Facts.slide.init($slide,e)),console.log($slide),$slide.find("h2,h1").click(function(){F_UI.body.tooltip.show($("h2,h1",$(this).parent()).first(),$(this).closest("article")[0].factData)}),console.log(F_Facts.vars.$slideshow.find(".slick-current"))})}),F_Facts.vars.$slideshow.on("afterChange",function(){F_UI.body.updateColorSchemes(),F_Facts.vars.$slideshow.find(":not(.slick-current)").scrollTop(0),console.log(this);var e=F_Facts.vars.$slideshow.find(".slick-current"),t=(e[0].factData,e[0].factFile);console.log(e.find("h1").text(),t.replace(/.*(\/[^\/]+\/[^\/]+)$/,"$1")),F_Global.history.set(e.find("h1").text(),window.location.origin+t.replace(/.*(\/[^\/]+\/[^\/]+)$/,"#!$1"))})})},slide:{init:function(e,t){var s=this;return e.scroll(function(i){console.log(e.find(".fact__relatives").offset().top-e.scrollTop()),e.find(".fact__relatives").offset().top-e.scrollTop()<=0&&s.references.init(e,t)}),e},references:{insertionTimeout:0,init:function(e,t){e[0].referencesInited||(e[0].referencesInited=!0,console.log(t.tags),F_Git.search(t.tags.join("+"),function(t){console.log(t._data),t._data.length&&(console.log(getRandItemsOfArray(t._data,3)),$.each(getRandItemsOfArray(t._data,3),function(t,s){F_Git.file(s.html_url,function(t){F_Facts.slide.references.reference(t,e)})}))}))},reference:function(e,t){e.backgroundColor=F_UI.body.getRandColorScheme()[1];var s=$(F_Global.tmpl("factArticleRelative",e));console.log(t.find(".fact__relatives .relatives"),s),t.find(".fact__relatives .relatives").append(s),setTimeout(function(){s.addClass("is-active")},F_Facts.slide.references.insertionTimeout),F_Facts.slide.references.insertionTimeout=F_Facts.slide.references.insertionTimeout+100}}}};
var F_Git={vars:{gitURLContent:"https://api.github.com/repos/",gitURLSearch:"https://api.github.com/search/code?q=repo:"},init:function(){F_Git.vars.gitUser="sebastiantiede",F_Git.vars.gitRepo="whatthefact",F_Git.vars.gitURLContent=F_Git.vars.gitURLContent+F_Git.vars.gitUser+"/"+F_Git.vars.gitRepo+"/contents",F_Git.vars.gitURLSearch=F_Git.vars.gitURLSearch+F_Git.vars.gitUser+"/"+F_Git.vars.gitRepo},languageSelector:function(){var t=navigator.language||navigator.userLanguage;return t+"_"+t.toUpperCase()},folder:function(t,i){$.get(F_Git.vars.gitURLContent+t,function(t){var e=F_Git,a=[];$.each(t,function(t,i){a[t]=Object.assign(i,e)}),t=Object.assign({_data:a},e),i(t)},"json")},file:function(t,i){var e=t||this.download_url,a=e.match(/([^\.]+)$/)[1]||null;$regex=new RegExp("(http(s)?://)github.com(/"+F_Git.vars.gitUser+"/"+F_Git.vars.gitRepo+")/blob","i"),e=e.replace($regex,"$1raw.githubusercontent.com$3"),$.get(e,i,a)},search:function(t,i){t=t.replace(/\s/,"+"),$.get(F_Git.vars.gitURLSearch+"+"+t,function(t){var e=F_Git,a=[];$.each(t.items,function(t,i){a[t]=Object.assign(i,e)}),t=Object.assign({_data:a},e),i(t)},"json")},searchFile:function(t,i){t=t.replace(/\s/,"+"),this.search(t+"+in:path",i)}};
var F_UI={vars:{colorSchemes:[["#505551","#a7d3af","#d0e3d4"],["#6b4c5b","#d3a7bc","#edd9e3"],["#3e4664","#a5aed1","#ccd1e3"],["#684949","#c49a9a","#dfc6c6"]]},init:function(){this.header.nav.burger(),F_UI.body.updateColorSchemes()},header:{nav:{burger:function(){$(".hamburger").click(function(o){o.preventDefault();var t=$(this),e=$("body");t.hasClass("is-active")?(e.removeClass("nav-is-open"),t.removeClass("is-active")):(e.addClass("nav-is-open"),t.addClass("is-active"))})}}},body:{updateColorSchemes:function(o){var t=(F_UI.vars.colorSchemes,F_UI.body.getRandColorScheme()),e=$("#colorScheme");console.log(t),$newCSS=$(F_Global.tmpl("colorSchemesCSS",{color1:t[0],color2:t[1],color3:t[2]})),e.length?e.replaceWith($newCSS):$("body").prepend($newCSS)},getRandColorScheme:function(){var o=F_UI.vars.colorSchemes;return o[Math.floor(Math.random()*o.length+1)-1]},tooltip:{$tootltip:!1,show:function(o,t){F_UI.body.tooltip.$tootltip.length&&F_UI.body.tooltip.$tootltip.remove(),F_UI.body.tooltip.$tootltip=$(F_Global.tmpl("factTooltip",t)),o.closest("article").append(F_UI.body.tooltip.$tootltip),$(window).on("resize__tooltip",function(){F_UI.body.tooltip.$tootltip.css({left:o.offset().left+o.width()/2-F_UI.body.tooltip.$tootltip.width()/2,top:o.offset().top-o.height()/2})}).trigger("resize__tooltip")}}}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fYXBwLmpzIiwiYmFzZS5qcyIsImNvbXBvbmVudHMvZmFjdHMuanMiLCJjb21wb25lbnRzL2dpdC5qcyIsImNvbXBvbmVudHMvdWkuanMiXSwibmFtZXMiOlsidHJhbnNpdGlvbkVuZFRyaWdnZXIiLCIkIiwid2luZG93IiwicmVhZHkiLCJGX0dsb2JhbCIsImluaXQiLCJGX1VJIiwiRl9HaXQiLCJGX0ZhY3RzIiwic2Nyb2xsIiwicmVzaXplIiwidGhpcyIsInRyaWdnZXIiLCJ2YXJzIiwiaXNfbW9iaWxlIiwiTlNJTktBX0dsb2JhbCIsImNoZWNrIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsImlzX3RhYmxldCIsIndXIiwid2lkdGgiLCJ3SCIsImhlaWdodCIsImZhY3RvciIsImlzX3NtYXJ0cGhvbmUiLCJhamF4UGFnZSIsInVybCIsImZuQWZ0ZXIiLCJ4aHIiLCJhYm9ydCIsImFqYXgiLCJzdWNjZXNzIiwiZGF0YSIsIiRkYXRhIiwicGFyc2VIVE1MIiwiZmlsdGVyIiwiaXRlbSIsIm5vZGVOYW1lIiwidGl0bGUiLCJ0ZXh0IiwiZGF0YVR5cGUiLCJyYW5kb21Db2xvciIsImNvbG9yIiwiaSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRtcGwiLCJpZCIsIl8iLCJ0ZW1wbGF0ZSIsImNsb25lIiwiaGlzdG9yeSIsInNldCIsInB1c2hTdGF0ZSIsImdldFJhbmRJdGVtc09mQXJyYXkiLCJhcnJheSIsImxlbmd0aCIsImFMZW5ndGgiLCJjb25zb2xlIiwibG9nIiwic3BsaWNlIiwic2xpZGVzaG93IiwiJHNsaWRlc2hvdyIsInNlYXJjaEZpbGUiLCJyZXN1bHQiLCJzbGljayIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsImVhY2giLCJfZGF0YSIsImVudHJ5IiwiZmlsZSIsImh0bWxfdXJsIiwiZmlsZUNvbnRlbnQiLCIkc2xpZGUiLCJmYWN0RmlsZSIsImZhY3REYXRhIiwic2xpZGUiLCJmaW5kIiwiY2xpY2siLCJib2R5IiwidG9vbHRpcCIsInNob3ciLCJwYXJlbnQiLCJmaXJzdCIsImNsb3Nlc3QiLCJvbiIsInVwZGF0ZUNvbG9yU2NoZW1lcyIsInNjcm9sbFRvcCIsInRoaXNGaWxlIiwicmVwbGFjZSIsImxvY2F0aW9uIiwib3JpZ2luIiwiX3RoaXMiLCJlIiwib2Zmc2V0IiwidG9wIiwicmVmZXJlbmNlcyIsImluc2VydGlvblRpbWVvdXQiLCJyZWZlcmVuY2VzSW5pdGVkIiwidGFncyIsInNlYXJjaCIsImpvaW4iLCJyZWZlcmVuY2UiLCJiYWNrZ3JvdW5kQ29sb3IiLCJnZXRSYW5kQ29sb3JTY2hlbWUiLCIkcmVmZXJlbmNlIiwiYXBwZW5kIiwic2V0VGltZW91dCIsImFkZENsYXNzIiwiZ2l0VVJMQ29udGVudCIsImdpdFVSTFNlYXJjaCIsImdpdFVzZXIiLCJnaXRSZXBvIiwibGFuZ3VhZ2VTZWxlY3RvciIsImxhbmciLCJsYW5ndWFnZSIsInVzZXJMYW5ndWFnZSIsInRvVXBwZXJDYXNlIiwiZm9sZGVyIiwib25sb2FkIiwiZ2V0IiwidGhpc0ZucyIsIk9iamVjdCIsImFzc2lnbiIsImZpbGVVcmwiLCJkb3dubG9hZF91cmwiLCJmaWxlVHlwZSIsIm1hdGNoIiwiJHJlZ2V4IiwiUmVnRXhwIiwicXVlcnkiLCJpdGVtcyIsImNvbG9yU2NoZW1lcyIsImhlYWRlciIsIm5hdiIsImJ1cmdlciIsInByZXZlbnREZWZhdWx0IiwiJHRoaXMiLCIkYm9keSIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJnbG9iYWwiLCJzZWxlY3RlZENvbG9ycyIsIiRjc3MiLCIkbmV3Q1NTIiwiY29sb3IxIiwiY29sb3IyIiwiY29sb3IzIiwicmVwbGFjZVdpdGgiLCJwcmVwZW5kIiwiJHRvb3RsdGlwIiwiJHRhcmdldCIsImNvbnRlbnQiLCJyZW1vdmUiLCJjc3MiLCJsZWZ0Il0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxzQkFBdUIsa0VBRTNCQyxHQUFFQyxRQUFRQyxNQUFNLFdBQ1pD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c0UsVUFBVS9GLFFBQzNCekQsS0FBS2lGLEtBQUtDLFFBQVFzRSxVQUFVRyxTQUdoQzNKLEtBQUtpRixLQUFLQyxRQUFRc0UsVUFBWTdKLEVBQUVHLFNBQVNpRCxLQUFLLGNBQWUyRyxJQUU3REQsRUFBUW5FLFFBQVEsV0FBV3NCLE9BQU81RyxLQUFLaUYsS0FBS0MsUUFBUXNFLFdBRXBEN0osRUFBRUMsUUFBUTJGLEdBQUcsa0JBQW1CLFdBQzVCdkYsS0FBS2lGLEtBQUtDLFFBQVFzRSxVQUFVSSxLQUN4QkMsS0FBT0osRUFBUXpELFNBQVM2RCxLQUFNSixFQUFRckksUUFBUSxFQUFLcEIsS0FBS2lGLEtBQUtDLFFBQVFzRSxVQUFVcEksUUFBUSxFQUN2RjZFLElBQUt3RCxFQUFRekQsU0FBU0MsSUFBS3dELEVBQVFuSSxTQUFTLE1BRWpEaEIsUUFBUSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdHJhbnNpdGlvbkVuZFRyaWdnZXIgPSAndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCc7XG5cbiQod2luZG93KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICBGX0dsb2JhbC5pbml0KCk7XG4gICAgRl9VSS5pbml0KCk7XG4gICAgRl9HaXQuaW5pdCgpO1xuICAgIEZfRmFjdHMuaW5pdCgpO1xufSkuc2Nyb2xsKGZ1bmN0aW9uKCkge1xufSkucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykudHJpZ2dlcigncmVzaXplX190b29sdGlwJyk7XG59KTtcbiIsIi8qKlxuKiBEZXNjcmlwdGlvbiBmb3IgR09fR2xvYmFsXG4qIEBwcml2YXRlXG4qIEBwcm9wZXJ0eSBHT19HbG9iYWxcbiovXG52YXIgRl9HbG9iYWwgPSB7XG4gICAgdmFyczoge1xuICAgIH0sXG4gICAgLyoqXG4gICAgKiBEZXNjcmlwdGlvbiBmb3IgaW5pdFxuICAgICogQHByaXZhdGVcbiAgICAqIEBtZXRob2QgaW5pdFxuICAgICogQHJldHVybiB7T2JqZWN0fSBkZXNjcmlwdGlvblxuICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG5cbiAgICB9LFxuICAgIC8qKlxuICAgICogRGVzY3JpcHRpb24gZm9yIGlzX21vYmlsZVxuICAgICogQHByaXZhdGVcbiAgICAqIEBtZXRob2QgaXNfbW9iaWxlXG4gICAgKiBAcmV0dXJuIHtPYmplY3R9IGRlc2NyaXB0aW9uXG4gICAgKi9cbiAgICBpc19tb2JpbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihOU0lOS0FfR2xvYmFsLnZhcnMuaXNfbW9iaWxlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBOU0lOS0FfR2xvYmFsLnZhcnMuaXNfbW9iaWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNoZWNrID0gZmFsc2U7XG4gICAgICAgIChmdW5jdGlvbihhKXtpZigvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZHxhZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2kudGVzdChhKXx8LzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdChhLnN1YnN0cigwLDQpKSkgY2hlY2sgPSB0cnVlO30pKG5hdmlnYXRvci51c2VyQWdlbnR8fG5hdmlnYXRvci52ZW5kb3J8fHdpbmRvdy5vcGVyYSk7XG4gICAgICAgIE5TSU5LQV9HbG9iYWwudmFycy5pc19tb2JpbGUgPSBjaGVjaztcbiAgICAgICAgcmV0dXJuIGNoZWNrO1xuICAgIH0sXG4gICAgaXNfdGFibGV0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHdXID0gJCh3aW5kb3cpLndpZHRoKCksXG4gICAgICAgICAgICB3SCA9ICQod2luZG93KS5oZWlnaHQoKSxcbiAgICAgICAgICAgIGZhY3RvciA9IHdXPndIP3dXL3dIOndIL3dXO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5pc19tb2JpbGUoKSAmJlxuICAgICAgICAgICAgLy8kKHdpbmRvdykud2lkdGgoKSA+IDQxNCAmJlxuICAgICAgICAgICAgZmFjdG9yIDwgMS42XG4gICAgICAgICk7XG4gICAgfSxcbiAgICBpc19zbWFydHBob25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHdXID0gJCh3aW5kb3cpLndpZHRoKCksXG4gICAgICAgICAgICB3SCA9ICQod2luZG93KS5oZWlnaHQoKSxcbiAgICAgICAgICAgIGZhY3RvciA9IHdXPndIP3dXL3dIOndIL3dXO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5pc19tb2JpbGUoKSAmJlxuICAgICAgICAgICAgLy8kKHdpbmRvdykud2lkdGgoKSA+IDQxNCAmJlxuICAgICAgICAgICAgZmFjdG9yID4gMS42XG4gICAgICAgICk7XG4gICAgfSxcbiAgICBhamF4UGFnZTogZnVuY3Rpb24odXJsLCBmbkFmdGVyKSB7XG4gICAgICAgIGlmKE5TSU5LQV9HbG9iYWwudmFycy54aHIpIHtcbiAgICAgICAgICAgIE5TSU5LQV9HbG9iYWwudmFycy54aHIuYWJvcnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIE5TSU5LQV9HbG9iYWwudmFycy54aHIgPSAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsIDogdXJsLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRkYXRhID0gJC5wYXJzZUhUTUwoZGF0YSkuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5ub2RlTmFtZSA9PSAnVElUTEUnIHx8IGl0ZW0ubm9kZU5hbWUgPT0gJ01BSU4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGl0bGUgPSAkZGF0YS5maWx0ZXIoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBpZihpdGVtLm5vZGVOYW1lID09ICdUSVRMRScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkKCd0aXRsZScpLnRleHQoJCh0aXRsZVswXSkudGV4dCgpKTtcblxuICAgICAgICAgICAgICAgIGZuQWZ0ZXIoJGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICByYW5kb21Db2xvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsZXR0ZXJzID0gJzAxMjM0NTY3ODlBQkNERUYnLFxuICAgICAgICAgICAgY29sb3IgPSAnIyc7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrICkge1xuICAgICAgICAgICAgY29sb3IgKz0gbGV0dGVyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNildO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9LFxuICAgIC8qKlxuICAgICogRGVzY3JpcHRpb24gZm9yIHRtcGxcbiAgICAqIEBwcml2YXRlXG4gICAgKiBAbWV0aG9kIHRtcGxcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBpZCAocmVxdWlyZWQpXG4gICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAoZGVmYXVsdDogbnVsbClcbiAgICAqIEByZXR1cm4ge09iamVjdH0galF1ZXJ5IGVsZW1lbnRzXG4gICAgKi9cbiAgICB0bXBsOiBmdW5jdGlvbihpZCwgZGF0YSkge1xuICAgICAgICBkYXRhID0geyBkYXRhIDogZGF0YSB9IHx8IHsgZGF0YSA6IHt9IH07XG5cbiAgICAgICAgcmV0dXJuIF8udGVtcGxhdGUoJCgnI3RtcGxfJytpZCkuY2xvbmUoKS50ZXh0KCkpKGRhdGEpO1xuICAgIH0sXG4gICAgaGlzdG9yeToge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHRpdGxlLCB1cmwpIHtcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHt9LCB0aXRsZSwgdXJsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsInZhciBGX0ZhY3RzID0ge1xuICAgIHZhcnM6IHtcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNsaWRlc2hvdygpO1xuICAgIH0sXG4gICAgc2xpZGVzaG93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgRl9GYWN0cy52YXJzLiRzbGlkZXNob3cgPSAkKCcjZmFjdHNfc2xpZGVzaG93Jyk7XG4gICAgICAgIEZfR2l0LnNlYXJjaEZpbGUoJ2ZhY3RzL2RlX0RFJywgZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICBGX0ZhY3RzLnZhcnMuJHNsaWRlc2hvdy5zbGljayh7XG4gICAgICAgICAgICAgICAgcHJldkFycm93OiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJzbGljay1wcmV2IG1hdGVyaWFsLWljb25zXCI+JiN4RTMxNDs8L2J1dHRvbj4nLFxuICAgICAgICAgICAgICAgIG5leHRBcnJvdzogJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwic2xpY2stbmV4dCBtYXRlcmlhbC1pY29uc1wiPiYjeEUzMTU7PC9idXR0b24+J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQuZWFjaChyZXN1bHQuX2RhdGEsIGZ1bmN0aW9uKGksIGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgRl9HaXQuZmlsZShlbnRyeS5odG1sX3VybCwgZnVuY3Rpb24oZmlsZUNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNsaWRlID0gJChGX0dsb2JhbC50bXBsKCdmYWN0QXJ0aWNsZScsIGZpbGVDb250ZW50ICkpO1xuICAgICAgICAgICAgICAgICAgICAkc2xpZGVbMF0uZmFjdEZpbGUgPSBlbnRyeS5odG1sX3VybDtcbiAgICAgICAgICAgICAgICAgICAgJHNsaWRlWzBdLmZhY3REYXRhID0gZmlsZUNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIEZfRmFjdHMudmFycy4kc2xpZGVzaG93LnNsaWNrKCdzbGlja0FkZCcsRl9GYWN0cy5zbGlkZS5pbml0KCRzbGlkZSwgZmlsZUNvbnRlbnQpKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2xpZGUpO1xuICAgICAgICAgICAgICAgICAgICAkc2xpZGUuZmluZCgnaDIsaDEnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEZfVUkuYm9keS50b29sdGlwLnNob3coJCgnaDIsaDEnLCAkKHRoaXMpLnBhcmVudCgpKS5maXJzdCgpLCAkKHRoaXMpLmNsb3Nlc3QoJ2FydGljbGUnKVswXS5mYWN0RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coRl9GYWN0cy52YXJzLiRzbGlkZXNob3cuZmluZCgnLnNsaWNrLWN1cnJlbnQnKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgRl9GYWN0cy52YXJzLiRzbGlkZXNob3cub24oJ2FmdGVyQ2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgRl9VSS5ib2R5LnVwZGF0ZUNvbG9yU2NoZW1lcygpO1xuICAgICAgICAgICAgICAgIEZfRmFjdHMudmFycy4kc2xpZGVzaG93LmZpbmQoJzpub3QoLnNsaWNrLWN1cnJlbnQpJykuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgdmFyICRzbGlkZSA9IEZfRmFjdHMudmFycy4kc2xpZGVzaG93LmZpbmQoJy5zbGljay1jdXJyZW50JyksXG4gICAgICAgICAgICAgICAgICAgIHRoaXNGYWN0ID0gJHNsaWRlWzBdLmZhY3REYXRhLFxuICAgICAgICAgICAgICAgICAgICB0aGlzRmlsZSA9ICRzbGlkZVswXS5mYWN0RmlsZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2xpZGUuZmluZCgnaDEnKS50ZXh0KCksIHRoaXNGaWxlLnJlcGxhY2UoLy4qKFxcL1teXFwvXStcXC9bXlxcL10rKSQvLCAnJDEnKSk7XG4gICAgICAgICAgICAgICAgRl9HbG9iYWwuaGlzdG9yeS5zZXQoJHNsaWRlLmZpbmQoJ2gxJykudGV4dCgpLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgdGhpc0ZpbGUucmVwbGFjZSgvLiooXFwvW15cXC9dK1xcL1teXFwvXSspJC8sICcjISQxJykpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9KTtcblxuICAgIH0sXG4gICAgc2xpZGU6IHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oJHNsaWRlLCBmaWxlQ29udGVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICRzbGlkZS5zY3JvbGwoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzbGlkZS5maW5kKCcuZmFjdF9fcmVsYXRpdmVzJykub2Zmc2V0KCkudG9wLSRzbGlkZS5zY3JvbGxUb3AoKSk7XG4gICAgICAgICAgICAgICAgaWYoJHNsaWRlLmZpbmQoJy5mYWN0X19yZWxhdGl2ZXMnKS5vZmZzZXQoKS50b3AtJHNsaWRlLnNjcm9sbFRvcCgpIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVmZXJlbmNlcy5pbml0KCRzbGlkZSwgZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICRzbGlkZTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgaW5zZXJ0aW9uVGltZW91dDogMCxcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCRzbGlkZSwgZmlsZUNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBpZighJHNsaWRlWzBdLnJlZmVyZW5jZXNJbml0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNsaWRlWzBdLnJlZmVyZW5jZXNJbml0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlQ29udGVudC50YWdzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8kc2xpZGUuZmluZCgnLmZhY3RfX3JlbGF0aXZlcycpLmFwcGVuZCgpXG4gICAgICAgICAgICAgICAgICAgIEZfR2l0LnNlYXJjaChmaWxlQ29udGVudC50YWdzLmpvaW4oJysnKSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5fZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZighZGF0YS5fZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhnZXRSYW5kSXRlbXNPZkFycmF5KGRhdGEuX2RhdGEsIDMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChnZXRSYW5kSXRlbXNPZkFycmF5KGRhdGEuX2RhdGEsIDMpLCBmdW5jdGlvbihpLCBlbnRyeSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRl9HaXQuZmlsZShlbnRyeS5odG1sX3VybCwgZnVuY3Rpb24oZmlsZUNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRl9GYWN0cy5zbGlkZS5yZWZlcmVuY2VzLnJlZmVyZW5jZShmaWxlQ29udGVudCwgJHNsaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVmZXJlbmNlOiBmdW5jdGlvbihmaWxlQ29udGVudCwgJHNsaWRlKSB7XG4gICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQuYmFja2dyb3VuZENvbG9yID0gRl9VSS5ib2R5LmdldFJhbmRDb2xvclNjaGVtZSgpWzFdO1xuICAgICAgICAgICAgICAgIHZhciAkcmVmZXJlbmNlID0gJChGX0dsb2JhbC50bXBsKCdmYWN0QXJ0aWNsZVJlbGF0aXZlJywgZmlsZUNvbnRlbnQgKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNsaWRlLmZpbmQoJy5mYWN0X19yZWxhdGl2ZXMgLnJlbGF0aXZlcycpLCAkcmVmZXJlbmNlKTtcbiAgICAgICAgICAgICAgICAkc2xpZGUuZmluZCgnLmZhY3RfX3JlbGF0aXZlcyAucmVsYXRpdmVzJykuYXBwZW5kKCRyZWZlcmVuY2UpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRyZWZlcmVuY2UuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpXG4gICAgICAgICAgICAgICAgfSwgRl9GYWN0cy5zbGlkZS5yZWZlcmVuY2VzLmluc2VydGlvblRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIEZfRmFjdHMuc2xpZGUucmVmZXJlbmNlcy5pbnNlcnRpb25UaW1lb3V0ID0gRl9GYWN0cy5zbGlkZS5yZWZlcmVuY2VzLmluc2VydGlvblRpbWVvdXQrMTAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxufVxuXG5mdW5jdGlvbiBnZXRSYW5kSXRlbXNPZkFycmF5KGFycmF5LCBsZW5ndGgpIHtcbiAgICB2YXIgYUxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgICBhcnJheSA9IGFycmF5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSphcnJheS5sZW5ndGgpXTtcbiAgICBjb25zb2xlLmxvZyhsZW5ndGggLCBhTGVuZ3RoKTtcbiAgICBpZihsZW5ndGggPCBhTGVuZ3RoKSB7XG4gICAgICAgIGFycmF5ID0gYXJyYXkuc3BsaWNlKDAsIGxlbmd0aCk7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbn1cbiIsInZhciBGX0dpdCA9IHtcbiAgICB2YXJzOiB7XG4gICAgICAgIGdpdFVSTENvbnRlbnQgOiAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8nLFxuICAgICAgICBnaXRVUkxTZWFyY2ggOiAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9zZWFyY2gvY29kZT9xPXJlcG86J1xuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIEZfR2l0LnZhcnMuZ2l0VXNlciA9ICdzZWJhc3RpYW50aWVkZSc7XG4gICAgICAgIEZfR2l0LnZhcnMuZ2l0UmVwbyA9ICd3aGF0dGhlZmFjdCc7XG5cbiAgICAgICAgRl9HaXQudmFycy5naXRVUkxDb250ZW50ID0gRl9HaXQudmFycy5naXRVUkxDb250ZW50K0ZfR2l0LnZhcnMuZ2l0VXNlcisnLycrRl9HaXQudmFycy5naXRSZXBvKycvY29udGVudHMnO1xuXG4gICAgICAgIEZfR2l0LnZhcnMuZ2l0VVJMU2VhcmNoID0gRl9HaXQudmFycy5naXRVUkxTZWFyY2grRl9HaXQudmFycy5naXRVc2VyKycvJytGX0dpdC52YXJzLmdpdFJlcG87XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgICBGX0dpdC5mb2xkZXIoJy9kYXRhL2ZhY3RzLycgKyBGX0dpdC5sYW5ndWFnZVNlbGVjdG9yKCksIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICQuZWFjaChkYXRhLl9kYXRhLCBmdW5jdGlvbihpLCBmaWxlKSB7XG4gICAgICAgICAgICAgICAgZmlsZS5maWxlKG51bGwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgRl9HaXQuc2VhcmNoKCdXZWx0IHNjaMO2bicsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgRl9HaXQuc2VhcmNoRmlsZSgndGVzdCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB9KTtcblxuXG4gICAgfSxcbiAgICBsYW5ndWFnZVNlbGVjdG9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxhbmcgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZTtcbiAgICAgICAgcmV0dXJuIGxhbmcgKyAnXycgKyBsYW5nLnRvVXBwZXJDYXNlKCk7XG4gICAgfSxcbiAgICBmb2xkZXI6IGZ1bmN0aW9uKGZvbGRlciwgb25sb2FkKSB7XG4gICAgICAgICQuZ2V0KFxuICAgICAgICAgICAgRl9HaXQudmFycy5naXRVUkxDb250ZW50K2ZvbGRlcixcbiAgICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0ZucyA9IEZfR2l0O1xuXG4gICAgICAgICAgICAgICAgdmFyIF9kYXRhID0gW107XG4gICAgICAgICAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uKGksIGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZVxuICAgICAgICAgICAgICAgICAgICBfZGF0YVtpXSA9IE9iamVjdC5hc3NpZ24oZmlsZSwgdGhpc0Zucyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBkYXRhID0gT2JqZWN0LmFzc2lnbih7X2RhdGEgOiBfZGF0YX0sIHRoaXNGbnMpO1xuICAgICAgICAgICAgICAgIG9ubG9hZChkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnanNvbidcbiAgICAgICAgKTtcbiAgICB9LFxuICAgIGZpbGU6IGZ1bmN0aW9uKGZpbGUsIG9ubG9hZCkge1xuICAgICAgICB2YXIgZmlsZVVybCA9IGZpbGUgfHwgdGhpcy5kb3dubG9hZF91cmwsXG4gICAgICAgICAgICBmaWxlVHlwZSA9IGZpbGVVcmwubWF0Y2goLyhbXlxcLl0rKSQvKVsxXSB8fCBudWxsO1xuXG4gICAgICAgICRyZWdleCA9IG5ldyBSZWdFeHAoJyhodHRwKHMpPzpcXC9cXC8pZ2l0aHViXFwuY29tKFxcLycrRl9HaXQudmFycy5naXRVc2VyKydcXC8nK0ZfR2l0LnZhcnMuZ2l0UmVwbysnKVxcL2Jsb2InLCAnaScpO1xuICAgICAgICBmaWxlVXJsID0gZmlsZVVybC5yZXBsYWNlKCRyZWdleCwgJyQxcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSQzJyk7XG5cbiAgICAgICAgJC5nZXQoXG4gICAgICAgICAgICBmaWxlVXJsLFxuICAgICAgICAgICAgb25sb2FkLFxuICAgICAgICAgICAgZmlsZVR5cGVcbiAgICAgICAgKTtcbiAgICB9LFxuICAgIHNlYXJjaDogZnVuY3Rpb24ocXVlcnksIG9ubG9hZCkge1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5LnJlcGxhY2UoL1xccy8sJysnKTtcblxuICAgICAgICAkLmdldChcbiAgICAgICAgICAgIEZfR2l0LnZhcnMuZ2l0VVJMU2VhcmNoKycrJytxdWVyeSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0ZucyA9IEZfR2l0O1xuXG4gICAgICAgICAgICAgICAgdmFyIF9kYXRhID0gW107XG4gICAgICAgICAgICAgICAgJC5lYWNoKGRhdGEuaXRlbXMsIGZ1bmN0aW9uKGksIGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZVxuICAgICAgICAgICAgICAgICAgICBfZGF0YVtpXSA9IE9iamVjdC5hc3NpZ24oZmlsZSwgdGhpc0Zucyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBkYXRhID0gT2JqZWN0LmFzc2lnbih7X2RhdGEgOiBfZGF0YX0sIHRoaXNGbnMpO1xuICAgICAgICAgICAgICAgIG9ubG9hZChkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnanNvbidcbiAgICAgICAgKTtcblxuICAgICAgICAvL2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vc2VhcmNoL2NvZGU/cT1yZXBvOnNlYmFzdGlhbnRpZWRlL2ZhY3RzK3dlbHRcbiAgICB9LFxuICAgIHNlYXJjaEZpbGU6IGZ1bmN0aW9uKHF1ZXJ5LCBvbmxvYWQpIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5yZXBsYWNlKC9cXHMvLCcrJyk7XG4gICAgICAgIHRoaXMuc2VhcmNoKHF1ZXJ5KycraW46cGF0aCcsIG9ubG9hZCk7XG4gICAgfVxufVxuIiwidmFyIEZfVUkgPSB7XG4gICAgdmFyczoge1xuICAgICAgICBjb2xvclNjaGVtZXMgOiBbXG4gICAgICAgICAgICBbJyM1MDU1NTEnLCAnI2E3ZDNhZicsICcjZDBlM2Q0J10sXG4gICAgICAgICAgICBbJyM2YjRjNWInLCAnI2QzYTdiYycsICcjZWRkOWUzJ10sXG4gICAgICAgICAgICBbJyMzZTQ2NjQnLCAnI2E1YWVkMScsICcjY2NkMWUzJ10sXG4gICAgICAgICAgICBbJyM2ODQ5NDknLCAnI2M0OWE5YScsICcjZGZjNmM2J10sXG4gICAgICAgIF1cbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmhlYWRlci5uYXYuYnVyZ2VyKCk7XG4gICAgICAgIEZfVUkuYm9keS51cGRhdGVDb2xvclNjaGVtZXMoKTtcbiAgICB9LFxuICAgIGhlYWRlcjoge1xuXG4gICAgICAgIG5hdjoge1xuICAgICAgICAgICAgYnVyZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcuaGFtYnVyZ2VyJykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAkYm9keSA9ICQoJ2JvZHknKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzID0gJ2lzLWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZPcGVuQ2xhc3MgPSAnbmF2LWlzLW9wZW4nO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCR0aGlzLmhhc0NsYXNzKGFjdGl2ZUNsYXNzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGJvZHkucmVtb3ZlQ2xhc3MobmF2T3BlbkNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRib2R5LmFkZENsYXNzKG5hdk9wZW5DbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcyhhY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgYm9keToge1xuICAgICAgICB1cGRhdGVDb2xvclNjaGVtZXM6IGZ1bmN0aW9uKGdsb2JhbCkge1xuICAgICAgICAgICAgdmFyIGNvbG9yU2NoZW1lcyA9IEZfVUkudmFycy5jb2xvclNjaGVtZXMsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRDb2xvcnMgPSBGX1VJLmJvZHkuZ2V0UmFuZENvbG9yU2NoZW1lKCksXG4gICAgICAgICAgICAgICAgJGNzcyA9ICQoJyNjb2xvclNjaGVtZScpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZWN0ZWRDb2xvcnMpO1xuICAgICAgICAgICAgJG5ld0NTUyA9ICQoRl9HbG9iYWwudG1wbCgnY29sb3JTY2hlbWVzQ1NTJywge1xuICAgICAgICAgICAgICAgIGNvbG9yMSA6IHNlbGVjdGVkQ29sb3JzWzBdLFxuICAgICAgICAgICAgICAgIGNvbG9yMiA6IHNlbGVjdGVkQ29sb3JzWzFdLFxuICAgICAgICAgICAgICAgIGNvbG9yMyA6IHNlbGVjdGVkQ29sb3JzWzJdXG4gICAgICAgICAgICB9ICkpXG5cbiAgICAgICAgICAgIGlmKCRjc3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJGNzcy5yZXBsYWNlV2l0aCgkbmV3Q1NTKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnYm9keScpLnByZXBlbmQoJG5ld0NTUyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldFJhbmRDb2xvclNjaGVtZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29sb3JTY2hlbWVzID0gRl9VSS52YXJzLmNvbG9yU2NoZW1lcztcbiAgICAgICAgICAgIHJldHVybiBjb2xvclNjaGVtZXNbKE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBjb2xvclNjaGVtZXMubGVuZ3RoKSArIDEpLTEpXTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgICAgJHRvb3RsdGlwOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uKCR0YXJnZXQsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBpZihGX1VJLmJvZHkudG9vbHRpcC4kdG9vdGx0aXAubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIEZfVUkuYm9keS50b29sdGlwLiR0b290bHRpcC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBGX1VJLmJvZHkudG9vbHRpcC4kdG9vdGx0aXAgPSAkKEZfR2xvYmFsLnRtcGwoJ2ZhY3RUb29sdGlwJywgY29udGVudCApKTtcblxuICAgICAgICAgICAgICAgICR0YXJnZXQuY2xvc2VzdCgnYXJ0aWNsZScpLmFwcGVuZChGX1VJLmJvZHkudG9vbHRpcC4kdG9vdGx0aXApO1xuXG4gICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemVfX3Rvb2x0aXAnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgRl9VSS5ib2R5LnRvb2x0aXAuJHRvb3RsdGlwLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAoJHRhcmdldC5vZmZzZXQoKS5sZWZ0KygkdGFyZ2V0LndpZHRoKCkvMikpLShGX1VJLmJvZHkudG9vbHRpcC4kdG9vdGx0aXAud2lkdGgoKS8yKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHRhcmdldC5vZmZzZXQoKS50b3AtKCR0YXJnZXQuaGVpZ2h0KCkvMilcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KS50cmlnZ2VyKCdyZXNpemVfX3Rvb2x0aXAnKTtcblxuICAgICAgICAgICAgfSxcblxuICAgICAgICB9XG4gICAgfVxufVxuIl19
